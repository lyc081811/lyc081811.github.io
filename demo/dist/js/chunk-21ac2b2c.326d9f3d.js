(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21ac2b2c"],{"1c83":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"DDOrderManage content"},[e._m(0),a("el-row",[a("div",{staticStyle:{flex:"1",overflow:"hidden",display:"flex","flex-direction":"column"}},[a("div",{staticClass:"peopleData"},[a("div",{staticClass:"searchParams"},[a("el-input",{staticClass:"arcRadius",staticStyle:{width:"150px"},attrs:{placeholder:"请搜索"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.getData(!0)}},model:{value:e.params.Filter,callback:function(t){e.$set(e.params,"Filter",t)},expression:"params.Filter"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})]),a("el-select",{staticStyle:{margin:"0 8px"},attrs:{clearable:"",placeholder:"订单状态"},model:{value:e.params.OrderFlag,callback:function(t){e.$set(e.params,"OrderFlag",t)},expression:"params.OrderFlag"}},e._l(e.reportType,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}),1),a("el-select",{staticStyle:{margin:"0 8px"},attrs:{clearable:"",placeholder:"替检状态"},model:{value:e.params.Replace,callback:function(t){e.$set(e.params,"Replace",t)},expression:"params.Replace"}},e._l(e.tjType,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}),1),a("el-select",{attrs:{placeholder:"时间类型"},model:{value:e.params.timeType,callback:function(t){e.$set(e.params,"timeType",t)},expression:"params.timeType"}},e._l(e.timeTypes,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),a("div",{staticStyle:{display:"inline-block",margin:"0 16px"}},[a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},model:{value:e.timeRange,callback:function(t){e.timeRange=t},expression:"timeRange"}},[e._v("\n              >")])],1),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.getData(!0)}}},[e._v("查询")]),a("div",{staticClass:"right"},[a("el-popover",{attrs:{placement:"bottom",width:"160"},model:{value:e.visible1,callback:function(t){e.visible1=t},expression:"visible1"}},[a("p",[e._v("是否打印导检单？")]),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.visible1=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.printGuide}},[e._v("确定")])],1),a("el-button",{attrs:{slot:"reference"},slot:"reference"},[e._v("打印导检单")])],1),a("el-popover",{staticStyle:{margin:"0 8px"},attrs:{placement:"bottom",width:"160"},model:{value:e.visible2,callback:function(t){e.visible2=t},expression:"visible2"}},[a("p",[e._v("是否打印姓名条码？")]),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.visible2=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.printName}},[e._v("确定")])],1),a("el-button",{attrs:{slot:"reference"},slot:"reference"},[e._v("打印姓名条码")])],1),a("el-button",{on:{click:e.printCheckModal}},[e._v("打印检验条码")])],1)],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.orderList,"tooltip-effect":"dark"},on:{"row-click":e.clickRow2,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"customerName",label:"客户姓名","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"sex",label:"性别"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t\t"+e._s(1===t.row.sex?"男":"女")+"\n\t\t\t\t\t\t")]}}])}),a("el-table-column",{attrs:{prop:"cardNum",label:"体检卡号"}}),a("el-table-column",{attrs:{prop:"unitName",label:"单位名称",width:"100px"}}),a("el-table-column",{attrs:{prop:"deptName",label:"部门名称",width:"100px"}}),a("el-table-column",{attrs:{prop:"orderMoney",label:"体检金额",width:"100px"}}),a("el-table-column",{attrs:{prop:"createOrderTime",label:"创建时间",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t\t"+e._s(e._f("formatDate")(t.row.createOrderTime,"YYYY-MM-DD"))+"\n\t\t\t\t\t\t")]}}])}),a("el-table-column",{attrs:{prop:"status",label:"订单状态",width:"100px"}}),a("el-table-column",{attrs:{prop:"status",label:"是否弃检",width:"100px"}}),a("el-table-column",{attrs:{prop:"isReped",label:"替检状态",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t\t"+e._s(t.row.isReped?"替检":"未替检")+"\n\t\t\t\t\t\t")]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"135px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.editBtn(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){e.viewInfo(t.row)}}},[e._v("查看")]),a("el-dropdown",{attrs:{trigger:"click"}},[a("span",{staticClass:"el-dropdown-link"},[e._v("\n\t\t\t\t\t\t\t\t\t\t更多"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("span",{on:{click:function(a){e.qjBtn(t.row,2)}}},[e._v("弃检")])]),!t.row.isReped&&t.row.isUnitOrder?a("el-dropdown-item",[a("span",{on:{click:function(a){e.openTJModal(t.row)}}},[e._v("替检")])]):a("el-dropdown-item",{attrs:{disabled:""}},[a("span",[e._v("替检")])]),t.row.isUnitOrder?a("el-dropdown-item",{attrs:{disabled:""}},[a("span",[e._v("删除订单")])]):a("el-dropdown-item",[a("span",{on:{click:function(a){e.delBtn(t.row)}}},[e._v("删除订单")])])],1)],1)]}}])})],1),a("div",{staticClass:"fixBottom"},[a("el-button",{attrs:{type:"text"},on:{click:function(t){e.toggleSelection("orderList","multipleTable")}}},[e._v("反选")]),a("span",{staticClass:"subitem"},[e._v("\n            合计：\n            "),a("span",{staticClass:"labelColor ftArial"},[e._v(e._s(e.orderList.length))])]),a("span",{staticClass:"subitem"},[e._v("\n            选中：\n            "),a("span",{staticClass:"labelColor ftArial"},[e._v(e._s(e.selectedTotal))])]),a("div",{staticClass:"right"},[a("el-pagination",{attrs:{"current-page":e.searchParams.PageIndex,"page-sizes":[10,20,50,100],total:e.total,layout:"total,sizes, prev, pager, next, jumper"},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)],1),a("el-dialog",{attrs:{title:"当前客户订单",visible:e.orderInfoModal,width:"800px","close-on-click-modal":!1},on:{"update:visible":function(t){e.orderInfoModal=t}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.itemsData.items,border:"",height:"250"}},[a("el-table-column",{attrs:{prop:"itemName",label:"项目名称"}}),a("el-table-column",{attrs:{prop:"feeType",label:"付费方式"}}),a("el-table-column",{attrs:{prop:"fullPrice",label:"项目原价"}}),a("el-table-column",{attrs:{prop:"exePrice",label:"项目现价"}}),a("el-table-column",{attrs:{prop:"status",label:"项目状态"}})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.orderInfoModal=!1,e.itemsData=[]}}},[e._v("关 闭")])],1)],1),a("el-dialog",{staticClass:"peopleInfoForm",attrs:{title:"客户信息",visible:e.peopleInfoModal,width:"1000px","close-on-click-modal":!1},on:{"update:visible":function(t){e.peopleInfoModal=t}}},[a("el-form",{ref:"peopleForm",staticStyle:{"max-height":"250px","overflow-y":"auto"},attrs:{model:e.peopleInfo.NewCustomer,rules:e.rules,inline:!0,"label-width":"50px"}},[a("el-form-item",{attrs:{label:"身份证号",prop:"IdcardNum","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"130px","margin-right":"8px"},attrs:{maxlength:"18"},model:{value:e.peopleInfo.NewCustomer.IdcardNum,callback:function(t){e.$set(e.peopleInfo.NewCustomer,"IdcardNum",t)},expression:"peopleInfo.NewCustomer.IdcardNum"}}),a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.getIdentity}},[e._v("刷身份证")])],1),a("el-form-item",{attrs:{label:"体检卡号",prop:"CardNum","label-width":e.formLabelWidth}},[a("el-input",{attrs:{maxlength:"20",autocomplete:"off"},model:{value:e.peopleInfo.NewCustomer.CardNum,callback:function(t){e.$set(e.peopleInfo.NewCustomer,"CardNum",t)},expression:"peopleInfo.NewCustomer.CardNum"}})],1),a("el-form-item",{attrs:{label:"姓名",prop:"CustomerName","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.peopleInfo.NewCustomer.CustomerName,callback:function(t){e.$set(e.peopleInfo.NewCustomer,"CustomerName",t)},expression:"peopleInfo.NewCustomer.CustomerName"}})],1),a("el-form-item",{attrs:{label:"性别",prop:"Sex","label-width":e.formLabelWidth}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.peopleInfo.NewCustomer.Sex,callback:function(t){e.$set(e.peopleInfo.NewCustomer,"Sex",t)},expression:"peopleInfo.NewCustomer.Sex"}},[a("el-option",{attrs:{label:"男",value:1}}),a("el-option",{attrs:{label:"女",value:2}})],1)],1),a("el-form-item",{attrs:{label:"民族",prop:"Nation","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.peopleInfo.NewCustomer.Nation,callback:function(t){e.$set(e.peopleInfo.NewCustomer,"Nation",t)},expression:"peopleInfo.NewCustomer.Nation"}})],1),a("el-form-item",{attrs:{label:"出生日期",prop:"Birthday","label-width":e.formLabelWidth}},[a("el-date-picker",{staticStyle:{width:"143px","margin-right":"8px"},attrs:{type:"date"},model:{value:e.peopleInfo.NewCustomer.Birthday,callback:function(t){e.$set(e.peopleInfo.NewCustomer,"Birthday",t)},expression:"peopleInfo.NewCustomer.Birthday"}}),a("el-button-group",[a("el-button",{staticStyle:{padding:"7px 6px",width:"50%"}},[e._v(e._s(e.age))]),a("el-button",{staticStyle:{padding:"7px 6px",width:"50%"}},[e._v("岁")])],1)],1),a("el-form-item",{attrs:{label:"职业",prop:"Occupation","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.peopleInfo.NewCustomer.Occupation,callback:function(t){e.$set(e.peopleInfo.NewCustomer,"Occupation",t)},expression:"peopleInfo.NewCustomer.Occupation"}})],1),a("el-form-item",{attrs:{label:"婚姻状况",prop:"MaritalStatus","label-width":e.formLabelWidth}},[a("el-select",{model:{value:e.peopleInfo.NewCustomer.MaritalStatus,callback:function(t){e.$set(e.peopleInfo.NewCustomer,"MaritalStatus",t)},expression:"peopleInfo.NewCustomer.MaritalStatus"}},[a("el-option",{attrs:{label:"未婚",value:1}}),a("el-option",{attrs:{label:"已婚",value:2}})],1)],1),a("el-form-item",{attrs:{label:"手机号",prop:"Tele","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.peopleInfo.NewCustomer.Tele,callback:function(t){e.$set(e.peopleInfo.NewCustomer,"Tele",t)},expression:"peopleInfo.NewCustomer.Tele"}})],1),a("el-form-item",{attrs:{label:"部门",prop:"DeptName","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.peopleInfo.NewCustomer.DeptName,callback:function(t){e.$set(e.peopleInfo.NewCustomer,"DeptName",t)},expression:"peopleInfo.NewCustomer.DeptName"}})],1),a("el-form-item",{attrs:{label:"班组",prop:"TeamName","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.peopleInfo.NewCustomer.TeamName,callback:function(t){e.$set(e.peopleInfo.NewCustomer,"TeamName",t)},expression:"peopleInfo.NewCustomer.TeamName"}})],1),a("el-form-item",{attrs:{label:"VIP属性",prop:"VipFlag","label-width":e.formLabelWidth}},[a("el-radio-group",{model:{value:e.peopleInfo.NewCustomer.VipFlag,callback:function(t){e.$set(e.peopleInfo.NewCustomer,"VipFlag",t)},expression:"peopleInfo.NewCustomer.VipFlag"}},[a("el-radio",{attrs:{label:1}},[e._v("是")]),a("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),a("el-form-item",{attrs:{label:"单位",prop:"UnitName","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.peopleInfo.NewCustomer.UnitName,callback:function(t){e.$set(e.peopleInfo.NewCustomer,"UnitName",t)},expression:"peopleInfo.NewCustomer.UnitName"}})],1),a("el-form-item",{staticClass:"w65",attrs:{label:"地址",prop:"Addr","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.peopleInfo.NewCustomer.Addr,callback:function(t){e.$set(e.peopleInfo.NewCustomer,"Addr",t)},expression:"peopleInfo.NewCustomer.Addr"}})],1),a("el-form-item",{staticClass:"w100",attrs:{label:"备注信息",prop:"Remark","label-width":e.formLabelWidth}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.peopleInfo.NewCustomer.Remark,callback:function(t){e.$set(e.peopleInfo.NewCustomer,"Remark",t)},expression:"peopleInfo.NewCustomer.Remark"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.peopleInfoModal=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.tjPeopleBtn}},[e._v("确定")])],1)],1),a("el-dialog",{staticClass:"currentOrder",attrs:{title:"当前客户订单",visible:e.currentOrderModal,width:"800px","close-on-click-modal":!1},on:{"update:visible":function(t){e.currentOrderModal=t}}},[a("div",{staticClass:"modal-top"},[a("el-button",{staticClass:"right",attrs:{type:"primary"},on:{click:function(t){e.qjBtn(e.itemsData,1)}}},[e._v("弃检")])],1),a("div",{staticClass:"modal-con"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"qjTable",staticStyle:{width:"100%"},attrs:{data:e.itemsData.items,"tooltip-effect":"dark",height:"250"},on:{"selection-change":e.qjSelectionChange,"row-click":function(t){e.clickRow(t,"qjTable")}}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"itemName",label:"项目名称"}}),a("el-table-column",{attrs:{prop:"feeType",label:"付款方式"}}),a("el-table-column",{attrs:{prop:"status",label:"项目状态"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.currentOrderModal=!1,e.itemsData=[]}}},[e._v("关 闭")])],1)])],1)])],1)},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"topTitle"},[a("span",[e._v("订单管理")])])}],l=(a("ac6a"),a("c1df")),i=a.n(l),s={name:"DDOrderManage",data:function(){return{value:"",options:"",visible1:!1,visible2:!1,total:0,selectedTotal:0,loading:!1,orderInfoModal:!1,peopleInfoModal:!1,currentOrderModal:!1,formLabelWidth:"70px",pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},reportType:[{value:"0",name:"未完成"},{value:"1",name:"已完成"}],timeTypes:[{value:0,label:"创建时间"},{value:1,label:"到检时间"}],tjType:[{value:"0",name:"未替检"},{value:"1",name:"替检"}],timeRange:[i()().add(-1,"weeks").format(),i()().format()],params:{timeType:0,timeRange:[i()().add(-1,"weeks").format(),i()().format()],OrderFlag:"",Replace:"",Filter:"",StartCreateDatetime:"",EndCreateDatetime:"",StratCheckBeginDatetime:"",EndCheckBeginDatetime:"",PageIndex:1,PageSize:10},age:0,searchParams:{OrderFlag:"",Replace:"",Filter:"",StartCreateDatetime:"",EndCreateDatetime:"",StratCheckBeginDatetime:"",EndCheckBeginDatetime:"",PageIndex:1,PageSize:10},orderList:[],itemsData:[],multipleSelection:[],qjSelection:[],orderVipFlag:!1,peopleInfo:{OrderCode:"",Operator:"001",NewCustomer:{CustomerCode:"00000000-0000-0000-0000-000000000000",CardNum:"00000000-0000-0000-0000-000000000000",CustomerName:"",Sex:"",Nation:"",IdcardNum:"",Birthday:"",Photo:"https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=2161523157,1298941018&fm=26&gp=0.jpg",MaritalStatus:"",VipFlag:0,Occupation:"",UnitName:"",DeptName:"",TeamName:"",Tele:"",Addr:"",Remark:""}},rules:{CardNum:[{required:!0,message:"请输入正确位数的体检卡号",trigger:"blur"}],CustomerName:[{required:!0,message:"请输入姓名",trigger:"blur"}],Sex:[{required:!0,message:"请输入性别",trigger:"blur"}],IdcardNum:[{required:!0,message:"请输入身份证号",trigger:"blur"},{max:18,min:18,message:"与身份证号码位数不符",trigger:"blur"}],Birthday:[{required:!0,message:"请选择时间",trigger:"change"}],VipFlag:[{required:!0,message:"请选择Vip属性",trigger:"blur"}],Tele:[{required:!0,message:"请输入联系电话",trigger:"blur"}]}}},created:function(){this.getData(!0)},methods:{clickRow2:function(e,t){"操作"!==t.label&&this.$refs.multipleTable.toggleRowSelection(e)},getCustomer:function(){var e=this;this.$axios.get(this.$api.GetCustomer,{params:{IdcardNum:this.peopleInfo.NewCustomer.IdcardNum}}).then(function(t){if(t.data.entity&&1===t.data.status){var a=t.data.entity;e.setCustomer(a)}else e.$message.error(t.data.message)}).catch(function(t){e.$message.error(t.data.message)})},setCustomer:function(e){for(var t in e)if(e.hasOwnProperty(t)){var a="";t.length>0&&(a=t.substr(0,1).toUpperCase()+t.substr(1)),e[t]&&a&&(this.peopleInfo.NewCustomer[a]=e[t])}},getData:function(e){var t=this;e?(0===this.params.timeType?(this.timeRange&&2===this.timeRange.length?(this.searchParams.StartCreateDatetime=i()(this.timeRange[0]).format("YYYY-MM-DD"),this.searchParams.EndCreateDatetime=i()(this.timeRange[1]).format("YYYY-MM-DD")):(this.searchParams.StartCreateDatetime="",this.searchParams.EndCreateDatetime=""),this.searchParams.StratCheckBeginDatetime="",this.searchParams.EndCheckBeginDatetime=""):1===this.params.timeType&&(this.timeRange&&2===this.timeRange.length?(this.searchParams.StratCheckBeginDatetime=i()(this.timeRange[0]).format("YYYY-MM-DD"),this.searchParams.EndCheckBeginDatetime=i()(this.timeRange[1]).format("YYYY-MM-DD")):(this.searchParams.StratCheckBeginDatetime="",this.searchParams.EndCheckBeginDatetime=""),this.searchParams.StartCreateDatetime="",this.searchParams.EndCreateDatetime=""),this.searchParams.Filter=this.params.Filter,this.searchParams.OrderFlag=this.params.OrderFlag,this.searchParams.Replace=this.params.Replace,this.params.timeRange=this.timeRange,this.searchParams.PageIndex=1):(this.params.Filter=this.searchParams.Filter,this.params.OrderFlag=this.searchParams.OrderFlag,this.params.Replace=this.searchParams.Replace,this.timeRange=this.params.timeRange),this.loading=!0,this.$axios.get(this.$api.GetOrderList,{params:this.searchParams}).then(function(e){e.data.entity&&1===e.data.status?(t.orderList=e.data.entity.resultData,t.total=e.data.entity.totalCount,t.orderList.forEach(function(e,a){e.items.forEach(function(e,o){e.isGiveUp?t.orderList[a].items[o].status="弃检":1===e.checkStatus?t.orderList[a].items[o].status="已检":t.orderList[a].items[o].status="未检"})})):(t.$message.error(e.data.message),t.total=0,t.orderList=[]),t.loading=!1}).catch(function(e){t.total=0,t.orderList=[],t.$message.error(e.data.message),t.loading=!1})},editBtn:function(e){this.currentOrderModal=!0,this.itemsData=e},viewInfo:function(e){this.orderInfoModal=!0,this.itemsData=e},qjBtn:function(e,t){var a=this;if(1===t){var o=e.orderCode,r=this.qjSelection.map(function(e){return e.itemCode});if(this.qjSelection.every(function(e){return"弃检"===e.status}))return void this.$message.error("项目中包含已弃检项目，请重新选择");if(this.qjSelection.every(function(e){return"已检"===e.status}))return void this.$message.error("项目中包含已已检项目，请重新选择");this.$axios.post(this.$api.GiveUpItem,{OrderCode:o,OperatorCode:"001",ItemCodes:r}).then(function(e){1===e.data.status?(a.$message.success("项目弃检成功！"),a.currentOrderModal=!1,a.itemsData="",a.getData()):a.$message.error(e.data.message)}).catch(function(e){a.$message.error(e.data.message)})}else{if(e.items.every(function(e){return"未检"!==e.status}))return void this.$alert('<span>存在已检项目，不可弃检！</span><br /><i style="color:#8F9399;">存在已检项目，不可弃检！</i>',"提醒：",{confirmButtonText:"关闭",dangerouslyUseHTMLString:!0,type:"warning"});this.$confirm("是否确认弃检该订单","提示：",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$axios.post(a.$api.GiveUpOrder,{OrderCode:e.orderCode,OperatorCode:"001"}).then(function(e){1===e.data.status?(a.$message.success("弃检成功！"),a.itemsData="",a.getData()):a.$message.error(e.data.message)}).catch(function(e){a.$message.error(e.data.message)})})}},openTJModal:function(e){this.peopleInfoModal=!0,this.peopleInfo.OrderCode=e.orderCode},tjPeopleBtn:function(){var e=this;this.$refs.peopleForm.validate(function(t){t&&e.$axios.post(e.$api.Replace,e.peopleInfo).then(function(t){1===t.data.status&&t.data.entity?(e.$message.success("替检成功！"),e.peopleInfo.OrderCode=""):e.$message.error(t.data.message),e.peopleInfoModal=!1}).catch(function(t){e.$message.error(t.data.message)})})},delBtn:function(e){var t=this;console.log(e),e.paidStatus?this.$alert('<span>该订单已经缴费，不可删除！</span><br /><i style="color:#8F9399;">订单已缴费不可删除</i>',"提醒：",{confirmButtonText:"关闭",dangerouslyUseHTMLString:!0,type:"warning"}):this.$confirm("是否确认删除该订单","提示：",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$axios.post(t.$api.DeleteOrder,{OrderCode:e.orderCode}).then(function(e){1===e.data.status?(t.$message.success("删除成功！"),t.itemsData="",t.getData()):t.$message.error(e.data.message)}).catch(function(e){t.$message.error(e.data.message)})})},handleCurrentChange:function(e){this.searchParams.PageIndex=e,this.getData()},handleSizeChange:function(e){this.searchParams.PageSize=e,this.searchParams.PageIndex=1,this.getData()},handleSelectionChange:function(e){this.multipleSelection=e},qjSelectionChange:function(e){this.qjSelection=e},filterTag:function(e,t){return t.tag===e},getIdentity:function(){api.getIdcard(this.setCustomer)},clearPropleInfo:function(){this.peopleInfo.NewCustomer.Sex="",this.peopleInfo.NewCustomer.CardNum="00000000-0000-0000-0000-000000000000",this.peopleInfo.NewCustomer.CustomerName="",this.peopleInfo.NewCustomer.Nation="",this.peopleInfo.NewCustomer.Birthday="",this.peopleInfo.NewCustomer.Occupation="",this.peopleInfo.NewCustomer.MaritalStatus=1,this.peopleInfo.NewCustomer.DeptName="",this.peopleInfo.NewCustomer.TeamName="",this.peopleInfo.NewCustomer.VipFlag=0,this.peopleInfo.NewCustomer.UnitName="",this.peopleInfo.NewCustomer.Addr="",this.peopleInfo.NewCustomer.Remark="",this.peopleInfo.NewCustomer.Tele=""},printGuide:function(){this.visible1=!1,alert("打印导检单")},printName:function(){this.visible2=!1,alert("打印姓名条码")},printCheckModal:function(){this.printModal=!0},printCheck:function(){alert("打印检验条码")}},watch:{multipleSelection:function(e,t){e!=t&&(this.selectedTotal=e.length)},"peopleInfo.Birthday":function(e,t){e!==t&&(this.age=i()().year()-i()(e).year())},"peopleInfo.NewCustomer.VipFlag":function(e,t){e!==t&&(this.orderVipFlag=1===e)},orderVipFlag:function(e,t){e!==t&&(this.peopleInfo.NewCustomer.VipFlag=e?1:0)},"peopleInfo.NewCustomer.IdcardNum":function(e,t){e!==t&&18===e.length?this.getCustomer():this.clearPropleInfo()}}},n=s,p=(a("6e5e"),a("2877")),c=Object(p["a"])(n,o,r,!1,null,null,null);c.options.__file="DDOrderManage.vue";t["default"]=c.exports},"3c54":function(e,t,a){},"6e5e":function(e,t,a){"use strict";var o=a("3c54"),r=a.n(o);r.a}}]);