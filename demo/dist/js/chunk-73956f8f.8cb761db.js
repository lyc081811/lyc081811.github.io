(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-73956f8f"],{5575:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content SMSManage"},[t._m(0),a("div",{staticClass:"peopleData"},[a("div",{staticClass:"propleSearch"},[a("el-input",{staticClass:"arcRadius",staticStyle:{width:"150px"},attrs:{placeholder:"请搜索"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.getData(!0)}},model:{value:t.params.Condition,callback:function(e){t.$set(t.params,"Condition",e)},expression:"params.Condition"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})]),a("el-select",{attrs:{placeholder:"报告状态",clearable:""},model:{value:t.params.ReportStatus,callback:function(e){t.$set(t.params,"ReportStatus",e)},expression:"params.ReportStatus"}},t._l(t.reportStatus,function(t){return a("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})}),1),a("div",{staticStyle:{display:"inline-block",margin:"0 16px"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions},model:{value:t.params.timeRange,callback:function(e){t.$set(t.params,"timeRange",e)},expression:"params.timeRange"}})],1),a("el-button",{on:{click:function(e){t.getData(!0)}}},[t._v("查询")])],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),a("el-table-column",{attrs:{prop:"unitName",label:"单位名称"}}),a("el-table-column",{attrs:{prop:"beginTime",label:"替检开始时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t._f("formatDate")(e.row.beginTime,"YYYY-MM-DD"))+"\n        ")]}}])}),a("el-table-column",{attrs:{prop:"reportStatus",label:"报告状态"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.makeReport(e.row)}}},[t._v("生成团检报告")])]}}])})],1),a("div",{staticClass:"fixBottom"},[a("div",{staticClass:"right"},[a("el-pagination",{attrs:{layout:"total,sizes, prev, pager, next",total:t.total,"page-sizes":[10,20,50,100],"current-page":t.searchParams.PageIndex},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)])],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"topTitle"},[a("span",[t._v("团检报告生成")])])}],n=(a("ac6a"),a("cadf"),a("551c"),a("097d"),a("c1df")),r=a.n(n),o={name:"SMSManage",data:function(){return{searchParams:{Condition:"",ReportStatus:"",BeginTime:"",EndTime:"",PageIndex:1,PageSize:10},params:{Condition:"",ReportStatus:"",timeRange:[r()().add(-1,"weeks").format(),r()().format()]},reportStatus:[{value:0,name:"未生成"},{value:1,name:"已生成"}],loading:!1,total:0,timeRange:[r()().add(-1,"weeks").format(),r()().format()],tableData:[],pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]}}},created:function(){this.getData(!0)},methods:{toggleSelection:function(){var t=this;this.tableData?this.tableData.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},getData:function(t){var e=this;this.loading=!0,t?(this.params.timeRange&&2===this.params.timeRange.length?(this.searchParams.BeginTime=r()(this.params.timeRange[0]).format("YYYY-MM-DD"),this.searchParams.EndTime=r()(this.params.timeRange[1]).format("YYYY-MM-DD")):(this.searchParams.BeginTime="",this.searchParams.EndTime=""),this.searchParams.Condition=this.params.Condition,this.searchParams.ReportStatus=this.params.ReportStatus,this.searchParams.PageIndex=1,this.timeRange=this.params.timeRange):(this.params.Condition=this.searchParams.Condition,this.params.ReportStatus=this.searchParams.ReportStatus,this.params.timeRange=this.timeRange),this.$axios.post(this.$api.UnitReportQuery,this.searchParams).then(function(t){1===t.data.status&&t.data.entity?(e.tableData=t.data.entity.unitReportMessages,e.total=t.data.entity.dataNum):e.$message.error(t.data.message),e.loading=!1}).catch(function(t){e.loading=!1,e.$message.error(t.data.message)})},makeReport:function(t){var e=this,a={Order:"",OperatorCode:"001"};t.orderCode&&(a.Order=t.orderCode);var s=this.$loading({lock:!0,text:"团检报告生成中，请稍后...",spinner:"el-icon-loading"});this.$axios.post(this.$api.MarkUnitReport,a).then(function(t){1===t.data.status?(e.getData(),e.$message.success("团检报告生成成功！")):e.$message.error(t.data.message),s.close()}).catch(function(t){e.$message.error(t.data.message)})},handleCurrentChange:function(t){this.searchParams.pageIndex=t,this.getData()},handleSizeChange:function(t){this.searchParams1.PageSize=t,this.searchParams.PageIndex=1,this.getData()}}},l=o,c=(a("7edf"),a("2877")),m=Object(c["a"])(l,s,i,!1,null,"3019a4b8",null);m.options.__file="BGMake.vue";e["default"]=m.exports},"7edf":function(t,e,a){"use strict";var s=a("a038"),i=a.n(s);i.a},a038:function(t,e,a){}}]);