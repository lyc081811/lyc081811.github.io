(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-07410494"],{"3c4e1":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[s("div",{staticClass:"topTitle"},[s("span",[t._v("个检订单")]),s("span",{directives:[{name:"show",rawName:"v-show",value:this.packageName,expression:"this.packageName"}],staticClass:"subitem",staticStyle:{"margin-left":"8px"}},[t._v("已选套餐："+t._s(this.packageName))]),s("div",{staticClass:"right"},[s("el-button",{attrs:{disabled:t.isEdit,icon:"el-icon-plus"},on:{click:function(e){t.addPackageModal=!0}}},[t._v("添加套餐")]),s("el-checkbox",{attrs:{disabled:t.isEdit},model:{value:t.orderVipFlag,callback:function(e){t.orderVipFlag=e},expression:"orderVipFlag"}},[t._v("VIP")]),s("el-select",{attrs:{placeholder:"订单类型",disabled:t.isEdit},model:{value:t.submitParams.Order.OrderType,callback:function(e){t.$set(t.submitParams.Order,"OrderType",e)},expression:"submitParams.Order.OrderType"}},t._l(t.orderType,function(t){return s("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})}),1),s("el-select",{attrs:{placeholder:"报告领取方式",disabled:t.isEdit},model:{value:t.submitParams.Order.ReportTakeWay,callback:function(e){t.$set(t.submitParams.Order,"ReportTakeWay",e)},expression:"submitParams.Order.ReportTakeWay"}},t._l(t.reportTake,function(t){return s("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})}),1),s("el-select",{staticStyle:{display:"none"},attrs:{placeholder:"报告类型",disabled:t.isEdit},model:{value:t.submitParams.Order.ReportTakeWay,callback:function(e){t.$set(t.submitParams.Order,"ReportTakeWay",e)},expression:"submitParams.Order.ReportTakeWay"}},t._l(t.reportType,function(t){return s("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})}),1),s("el-button",{attrs:{type:"primary",disabled:t.isEdit,loading:t.isSubmit},on:{click:t.submitOrder}},[t._v("提交")])],1)]),s("el-row",[s("div",{staticStyle:{flex:"0 0 320px","border-right":"1px solid #DCDFE5",display:"flex","flex-direction":"column"},attrs:{id:"resizable"}},[s("div",{staticClass:"subTitle"},[s("span",[t._v("客户信息")])]),s("div",{staticClass:"peopleInfo"},[s("el-form",{ref:"submitInfo",attrs:{model:t.submitParams.Order,rules:t.rules,"label-width":"70px","label-position":"left"}},[s("el-row",{attrs:{gutter:16}},[s("el-col",{attrs:{span:16}},[s("el-form-item",{attrs:{label:"身份证号",prop:"IdcardNum"}},[s("el-input",{attrs:{maxlength:"18"},model:{value:t.submitParams.Order.IdcardNum,callback:function(e){t.$set(t.submitParams.Order,"IdcardNum",e)},expression:"submitParams.Order.IdcardNum"}})],1),s("el-form-item",{attrs:{label:"体检账号",prop:"CardNum"}},[s("el-input",{attrs:{maxlength:"20"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.cardnumKeyup(e)}},model:{value:t.submitParams.Order.CardNum,callback:function(e){t.$set(t.submitParams.Order,"CardNum",e)},expression:"submitParams.Order.CardNum"}})],1),s("el-form-item",{attrs:{label:"姓名",prop:"CustomerName"}},[s("el-input",{attrs:{disabled:t.isEdit},model:{value:t.submitParams.Order.CustomerName,callback:function(e){t.$set(t.submitParams.Order,"CustomerName",e)},expression:"submitParams.Order.CustomerName"}})],1),s("el-form-item",{staticClass:"sexValue",attrs:{label:"性别",prop:"Sex"}},[s("el-select",{attrs:{disabled:t.isEdit},model:{value:t.submitParams.Order.Sex,callback:function(e){t.$set(t.submitParams.Order,"Sex",e)},expression:"submitParams.Order.Sex"}},[s("el-option",{attrs:{label:"男",value:1}}),s("el-option",{attrs:{label:"女",value:2}})],1)],1)],1),s("el-col",{staticStyle:{"text-align":"center"},attrs:{span:8}},[s("el-button",{staticStyle:{"margin-top":"17px",width:"100%"},attrs:{type:"primary",plain:""},on:{click:t.getIdentity}},[t._v("刷身份证")]),t.submitParams.Order.Photo?s("img",{staticStyle:{width:"80%",margin:"20px auto"},attrs:{src:"data: image/bmp; base64,"+t.submitParams.Order.Photo,alt:""}}):s("img",{staticStyle:{width:"80%",margin:"20px auto"},attrs:{src:a("dc3a"),alt:""}}),s("el-button",{attrs:{type:"text",disabled:t.isEdit},on:{click:t.getShot}},[t._v("拍照")])],1)],1),s("el-form-item",{attrs:{label:"民族",prop:"Nation"}},[s("el-input",{attrs:{disabled:t.isEdit},model:{value:t.submitParams.Order.Nation,callback:function(e){t.$set(t.submitParams.Order,"Nation",e)},expression:"submitParams.Order.Nation"}})],1),s("el-row",{attrs:{gutter:16}},[s("el-col",{attrs:{span:16}},[s("el-form-item",{attrs:{label:"出生日期",prop:"Birthday"}},[s("el-date-picker",{staticClass:"w100",attrs:{disabled:t.isEdit},model:{value:t.submitParams.Order.Birthday,callback:function(e){t.$set(t.submitParams.Order,"Birthday",e)},expression:"submitParams.Order.Birthday"}})],1)],1),s("el-col",{attrs:{span:8}},[s("el-button-group",{staticStyle:{"margin-top":"17px",width:"100%"}},[s("el-button",{staticStyle:{padding:"7px 18px",width:"50%"}},[t._v(t._s(t.age))]),s("el-button",{staticStyle:{padding:"7px 18px",width:"50%"}},[t._v("岁")])],1)],1)],1),s("el-form-item",{attrs:{label:"VIP属性",prop:"VipFlag"}},[s("el-radio-group",{attrs:{disabled:t.isEdit},model:{value:t.submitParams.Order.VipFlag,callback:function(e){t.$set(t.submitParams.Order,"VipFlag",e)},expression:"submitParams.Order.VipFlag"}},[s("el-radio",{attrs:{label:1}},[t._v("是")]),s("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1),s("el-form-item",{attrs:{label:"职业",prop:"Occupation"}},[s("el-input",{attrs:{disabled:t.isEdit},model:{value:t.submitParams.Order.Occupation,callback:function(e){t.$set(t.submitParams.Order,"Occupation",e)},expression:"submitParams.Order.Occupation"}})],1),s("el-form-item",{attrs:{label:"婚姻状况",prop:"MaritalStatus"}},[s("el-select",{attrs:{disabled:t.isEdit},model:{value:t.submitParams.Order.MaritalStatus,callback:function(e){t.$set(t.submitParams.Order,"MaritalStatus",e)},expression:"submitParams.Order.MaritalStatus"}},[s("el-option",{attrs:{label:"未婚",value:1}}),s("el-option",{attrs:{label:"已婚",value:2}})],1)],1),s("el-form-item",{attrs:{label:"手机号",prop:"Tele"}},[s("el-input",{attrs:{disabled:t.isEdit},model:{value:t.submitParams.Order.Tele,callback:function(e){t.$set(t.submitParams.Order,"Tele",e)},expression:"submitParams.Order.Tele"}})],1),s("el-form-item",{attrs:{label:"地址",prop:"Addr"}},[s("el-input",{attrs:{disabled:t.isEdit},model:{value:t.submitParams.Order.Addr,callback:function(e){t.$set(t.submitParams.Order,"Addr",e)},expression:"submitParams.Order.Addr"}})],1),s("el-form-item",{attrs:{label:"部门",prop:"DeptName"}},[s("el-input",{attrs:{disabled:t.isEdit},model:{value:t.submitParams.Order.DeptName,callback:function(e){t.$set(t.submitParams.Order,"DeptName",e)},expression:"submitParams.Order.DeptName"}})],1),s("el-form-item",{attrs:{label:"班组",prop:"TeamName"}},[s("el-input",{attrs:{disabled:t.isEdit},model:{value:t.submitParams.Order.TeamName,callback:function(e){t.$set(t.submitParams.Order,"TeamName",e)},expression:"submitParams.Order.TeamName"}})],1),s("el-form-item",{attrs:{label:"备注信息",prop:"Remark"}},[s("el-input",{attrs:{type:"textarea",disabled:t.isEdit},model:{value:t.submitParams.Order.Remark,callback:function(e){t.$set(t.submitParams.Order,"Remark",e)},expression:"submitParams.Order.Remark"}})],1)],1)],1)]),s("div",{staticStyle:{flex:"1",overflow:"hidden",display:"flex","flex-direction":"column"}},[s("div",{staticClass:"subTitle"},[s("span",{staticClass:"subitem labelColor"},[t._v("订单信息")]),s("span",{staticClass:"subitem"},[s("span",{staticStyle:{"font-family":"'Arial'"}},[t._v(t._s(t.submitParams.Order.CreateOrderTime))]),t._v("创建")]),s("div",{directives:[{name:"show",rawName:"v-show",value:"00000000-0000-0000-0000-000000000000"!=t.submitParams.Order.OrderCode,expression:"submitParams.Order.OrderCode != '00000000-0000-0000-0000-000000000000'"}],staticClass:"right"},[s("el-popover",{attrs:{placement:"bottom",width:"160"},model:{value:t.visible1,callback:function(e){t.visible1=e},expression:"visible1"}},[s("p",[t._v("是否打印导检单？")]),s("div",{staticStyle:{"text-align":"right",margin:"0"}},[s("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.visible1=!1}}},[t._v("取消")]),s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.printGuide}},[t._v("确定")])],1),s("el-button",{attrs:{slot:"reference"},slot:"reference"},[t._v("打印导检单")])],1),s("el-popover",{staticStyle:{margin:"0 8px"},attrs:{placement:"bottom",width:"160"},model:{value:t.visible2,callback:function(e){t.visible2=e},expression:"visible2"}},[s("p",[t._v("是否打印姓名条码？")]),s("div",{staticStyle:{"text-align":"right",margin:"0"}},[s("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.visible2=!1}}},[t._v("取消")]),s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.printName}},[t._v("确定")])],1),s("el-button",{attrs:{slot:"reference"},slot:"reference"},[t._v("打印姓名条码")])],1),s("el-button",{on:{click:t.printCheckModal}},[t._v("打印检验条码")])],1)]),s("div",{staticClass:"peopleData"},[s("div",{staticClass:"propleSearch"},[s("el-button",{attrs:{disabled:t.isEdit,icon:"el-icon-plus"},on:{click:function(e){t.addProjectModal=!0}}},[t._v("添加项目")]),s("el-button",{attrs:{disabled:t.isEdit,icon:"el-icon-delete"},on:{click:t.delModal}},[t._v("删除")]),s("el-button",{attrs:{disabled:t.isEdit},on:{click:t.discountBtn}},[t._v("打折")]),s("div",{staticClass:"right"},[s("span",{staticClass:"subitem"},[t._v("总金额： ￥"),s("span",{staticClass:"labelColor ftArial"},[t._v(t._s(t.submitParams.Order.OrderMoney.toFixed(2)))])]),s("span",{staticClass:"subitem"},[t._v("单位付费： ￥"),s("span",{staticClass:"labelColor ftArial"},[t._v(t._s(t.submitParams.Order.UnitPayMoney.toFixed(2)))])]),s("span",{staticClass:"subitem"},[t._v("个人已付： ￥"),s("span",{staticClass:"labelColor ftArial"},[t._v(t._s(t.submitParams.Order.PaidMoney.toFixed(2)))])]),s("span",{staticClass:"subitem"},[t._v("本次应收： ￥"),s("span",{staticClass:"labelColor ftArial"},[t._v(t._s((t.submitParams.Order.OrderMoney-t.submitParams.Order.UnitPayMoney-t.submitParams.Order.PaidMoney).toFixed(2)))])])])],1)]),s("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark"},on:{"row-click":function(e){t.clickRow(e,"table")},"selection-change":t.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",width:"55"}}),s("el-table-column",{attrs:{prop:"itemName",label:"项目名称","show-overflow-tooltip":!0}}),s("el-table-column",{attrs:{prop:"isUnitItem",label:"付费方式",width:"100px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.row.feeType?e.row.feeType:"个人")+"\n\t\t\t\t\t\t\t\t\t")]}}])}),s("el-table-column",{attrs:{prop:"fullPrice",label:"原价",sortable:"",width:"150px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t\t\t\t\t￥"+t._s(e.row.fullPrice)+"\n\t\t\t\t\t\t\t\t\t")]}}])}),s("el-table-column",{attrs:{prop:"exePrice",label:"执行价格",sortable:"",width:"150px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t\t\t\t\t￥"+t._s(e.row.exePrice)+"\n\t\t\t\t\t\t\t\t\t")]}}])}),s("el-table-column",{attrs:{prop:"checkStatus",label:"项目状态",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(1===e.row.checkStatus?"已检":"未检")+"\n\t\t\t\t\t\t\t\t\t")]}}])})],1),s("div",{staticClass:"fixBottom"},[s("el-button",{attrs:{type:"text"},on:{click:function(e){t.toggleSelection("tableData","table")}}},[t._v("反选")]),s("span",{staticClass:"subitem"},[t._v("合计： "),s("span",{staticClass:"labelColor ftArial"},[t._v(t._s(t.totalNum))])]),s("span",{staticClass:"subitem"},[t._v("选中： "),s("span",{staticClass:"labelColor ftArial"},[t._v(t._s(t.selectedTotal))])]),s("div",{staticClass:"right"},[s("span",{staticClass:"subitem"},[t._v("原价： ￥"),s("span",{staticClass:"labelColor ftArial"},[t._v(t._s(t.totalPrice.toFixed(2)))])]),s("span",{staticClass:"subitem"},[t._v("折扣金额： ￥"),s("span",{staticClass:"labelColor ftArial"},[t._v(t._s((t.totalPrice-t.exePrice).toFixed(2)))])]),s("span",{staticClass:"subitem"},[t._v("实收： ￥"),s("span",{staticClass:"labelColor ftArial"},[t._v(t._s(t.exePrice.toFixed(2)))])])])],1),s("el-dialog",{attrs:{title:"添加套餐",visible:t.addPackageModal,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(e){t.addPackageModal=e},open:t.getPackageList}},[s("div",{staticClass:"modal-tree addPackage"},[s("div",{staticClass:"modal-top"},[t._v("名称")]),s("div",{staticClass:"modal-con"},[s("el-tree",{ref:"tree",attrs:{data:t.GetPackageList,"show-checkbox":"","node-key":"id"},on:{check:t.treeClick}})],1),s("div",{staticClass:"packageDis"},[s("span",{staticClass:"item"},[t._v("原价：￥ "),s("span",[t._v(t._s(t.packageDiscount.totalPrice||0))])]),s("span",{staticClass:"item"},[t._v("折扣："),s("el-input",{attrs:{type:"number"},nativeOn:{keydown:function(e){return"button"in e||13===e.keyCode?t.packageDiscountHandle(e):null}},model:{value:t.packageDiscount.discount,callback:function(e){t.$set(t.packageDiscount,"discount",t._n(e))},expression:"packageDiscount.discount"}})],1),s("span",{staticClass:"item"},[t._v("实收："),s("el-input",{attrs:{type:"number"},nativeOn:{keydown:function(e){return"button"in e||13===e.keyCode?t.packageExePriceHandle(e):null}},model:{value:t.packageDiscount.exePrice,callback:function(e){t.$set(t.packageDiscount,"exePrice",t._n(e))},expression:"packageDiscount.exePrice"}}),t._v("元")],1)])]),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticStyle:{"margin-right":"8px"},on:{click:t.cancelPackageBtn}},[t._v("取 消")]),s("el-popover",{attrs:{placement:"top",width:"160"},model:{value:t.visible3,callback:function(e){t.visible3=e},expression:"visible3"}},[s("p",[t._v("点击确定将替换原选的项目及套餐！")]),s("div",{staticStyle:{"text-align":"right",margin:"0"}},[s("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.visible3=!1}}},[t._v("取消")]),s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.addPackageBtn}},[t._v("确定")])],1),s("el-button",{attrs:{slot:"reference",type:"primary"},slot:"reference"},[t._v("确 定")])],1)],1)]),s("el-dialog",{attrs:{title:"添加项目",visible:t.addProjectModal,"close-on-click-modal":!1,width:"800px"},on:{"update:visible":function(e){t.addProjectModal=e},open:t.getPackageAll}},[s("div",{staticClass:"addProject"},[s("div",{staticClass:"project-left"},[s("el-tabs",{staticClass:"addTabs",attrs:{type:"card"},on:{"tab-click":t.tabsClick},model:{value:t.activeTabName,callback:function(e){t.activeTabName=e},expression:"activeTabName"}},[s("el-tab-pane",{attrs:{label:"按套餐添加",name:"first"}},[s("div",{staticClass:"modal-tree",staticStyle:{"border-top":"none"}},[s("div",{staticClass:"modal-top"},[s("span",[t._v("名称")]),s("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请搜索"},model:{value:t.filterPackage,callback:function(e){t.filterPackage=e},expression:"filterPackage"}}),s("div",{staticClass:"right",staticStyle:{"margin-right":"8px"}},[s("el-button",{on:{click:t.addBtn}},[t._v("添加")])],1)],1),s("div",{staticClass:"modal-con"},[s("el-tree",{ref:"first",attrs:{data:t.GetPackageFilter,"show-checkbox":"","node-key":"id","filter-node-method":t.filtertree}})],1),s("div",{staticClass:"fixBottom"},[s("el-button",{attrs:{type:"text"},on:{click:function(e){t.allTreeSelection("GetPackageFilter","first",t.GetPackageFilterNum)}}},[t._v("全选")]),s("span",{staticClass:"subitem"},[t._v("合计： "),s("span",{staticClass:"labelColor ftArial"},[t._v(t._s(t.GetPackageFilter.length))])]),s("span",{staticClass:"subitem"},[t._v("选中： "),s("span",{staticClass:"labelColor ftArial"},[t._v(t._s(t.selectedFirstTotal||0))])])],1)])]),s("el-tab-pane",{attrs:{label:"按科室添加",name:"second"}},[s("div",{staticClass:"modal-tree",staticStyle:{"border-top":"none"}},[s("div",{staticClass:"modal-top"},[s("span",[t._v("名称")]),s("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请搜索"},model:{value:t.filterDept,callback:function(e){t.filterDept=e},expression:"filterDept"}}),s("div",{staticClass:"right",staticStyle:{"margin-right":"8px"}},[s("el-button",{on:{click:t.addBtn}},[t._v("添加")])],1)],1),s("div",{staticClass:"modal-con"},[s("el-tree",{ref:"second",attrs:{data:t.GetDeptList,"show-checkbox":"","node-key":"id","filter-node-method":t.filtertree}})],1),s("div",{staticClass:"fixBottom"},[s("el-button",{attrs:{type:"text"},on:{click:function(e){t.allTreeSelection("GetDeptList","second",t.GetDeptListNum)}}},[t._v("全选")]),s("span",{staticClass:"subitem"},[t._v("合计： "),s("span",{staticClass:"labelColor ftArial"},[t._v(t._s(t.GetDeptList.length))])]),s("span",{staticClass:"subitem"},[t._v("选中： "),s("span",{staticClass:"labelColor ftArial"},[t._v(t._s(t.selectedSecondTotal||0))])])],1)])]),s("el-tab-pane",{attrs:{label:"按项目添加",name:"third"}},[s("div",{staticClass:"modal-tree",staticStyle:{"border-top":"none"}},[s("div",{staticClass:"modal-top"},[s("span",[t._v("名称")]),s("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请搜索"},model:{value:t.filterProject,callback:function(e){t.filterProject=e},expression:"filterProject"}}),s("div",{staticClass:"right",staticStyle:{"margin-right":"8px"}},[s("el-button",{on:{click:t.addBtn}},[t._v("添加")])],1)],1),s("div",{staticClass:"modal-con"},[s("el-tree",{ref:"third",attrs:{data:t.GetItemList,"show-checkbox":"","node-key":"id","filter-node-method":t.filtertree}})],1),s("div",{staticClass:"fixBottom"},[s("el-button",{attrs:{type:"text"},on:{click:function(e){t.allTreeSelection("GetItemList","third",t.GetItemListNum)}}},[t._v("全选")]),s("span",{staticClass:"subitem"},[t._v("合计： "),s("span",{staticClass:"labelColor ftArial"},[t._v(t._s(t.GetItemList.length))])]),s("span",{staticClass:"subitem"},[t._v("选中： "),s("span",{staticClass:"labelColor ftArial"},[t._v(t._s(t.selectedThirdTotal||0))])])],1)])])],1)],1),s("div",{staticClass:"project-right"},[s("div",{staticClass:"modal-tree",staticStyle:{"margin-top":"40px"}},[s("div",{staticClass:"modal-top"},[s("span",[t._v("名称")]),s("div",{staticClass:"right",staticStyle:{"margin-right":"8px"}},[s("el-button",{on:{click:t.removeBtn}},[t._v("移除")])],1)]),s("div",{staticClass:"modal-con"},[s("el-tree",{ref:"treeRight",attrs:{data:t.selectedListAll,"show-checkbox":"","node-key":"id"}})],1),s("div",{staticClass:"fixBottom"},[s("el-button",{attrs:{type:"text"},on:{click:function(e){t.toogleTreeSelection("selectedListAll","treeRight")}}},[t._v("反选")]),s("span",{staticClass:"subitem"},[t._v("合计： "),s("span",{staticClass:"labelColor ftArial"},[t._v(t._s(t.selectedListAll.length))])]),s("span",{staticClass:"subitem"},[t._v("选中： "),s("span",{staticClass:"labelColor ftArial"},[t._v(t._s(t.selectedRightTotal||0))])])],1)])])]),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("div",{staticClass:"packageDis",staticStyle:{display:"inline-block"}},[s("span",{staticClass:"item"},[t._v("原价：￥ "),s("span",[t._v(t._s(t.projectDiscount.totalPrice||0))])]),s("span",{staticClass:"item"},[t._v("折扣："),s("el-input",{attrs:{type:"number"},nativeOn:{keydown:function(e){return"button"in e||13===e.keyCode?t.projectDiscountHandle(e):null}},model:{value:t.projectDiscount.discount,callback:function(e){t.$set(t.projectDiscount,"discount",t._n(e))},expression:"projectDiscount.discount"}})],1),s("span",{staticClass:"item"},[t._v("实收："),s("el-input",{attrs:{type:"number"},nativeOn:{keydown:function(e){return"button"in e||13===e.keyCode?t.projectExePriceHandle(e):null}},model:{value:t.projectDiscount.exePrice,callback:function(e){t.$set(t.projectDiscount,"exePrice",t._n(e))},expression:"projectDiscount.exePrice"}}),t._v("元")],1)]),s("el-button",{on:{click:t.cancelBtn}},[t._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:t.confirmAddProjectBtn}},[t._v("确 定")])],1)]),s("el-dialog",{attrs:{title:"订单信息",visible:t.orderInfoModal,"close-on-click-modal":!1,width:"800px"},on:{"update:visible":function(e){t.orderInfoModal=e}}},[s("div",{staticClass:"modal-title"},[s("span",[t._v("订单信息")])]),s("div",{staticClass:"modal-con"},[s("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.orderList,border:"",height:"250"}},[s("el-table-column",{attrs:{prop:"cardNum",label:"体检卡号"}}),s("el-table-column",{attrs:{prop:"idcardNum",width:"180px",label:"身份证号"}}),s("el-table-column",{attrs:{prop:"unitName",label:"单位名称"}}),s("el-table-column",{attrs:{prop:"orderMoney",label:"体检金额"}}),s("el-table-column",{attrs:{prop:"createOrderTime",label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(t._f("formatDate")(e.row.createOrderTime,"YYYY-MM-DD"))+"\n\t\t\t\t\t\t\t\t\t\t\t\t")]}}])}),s("el-table-column",{attrs:{prop:"status",label:"订单状态"}}),s("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row?s("el-button",{attrs:{type:"text"},on:{click:function(a){t.viewOrder(e.row)}}},[t._v("查看")]):t._e(),s("el-button",{attrs:{type:"text"}},[t._v("编辑")])]}}])})],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.orderInfoModal=!1}}},[t._v("关 闭")]),s("el-button",{attrs:{type:"primary"}},[t._v("创建新订单")])],1)]),s("el-dialog",{staticClass:"currentOrder",attrs:{title:"当前客户订单",visible:t.currentOrderModal,width:"800px","close-on-click-modal":!1},on:{"update:visible":function(e){t.currentOrderModal=e}}},[s("div",{staticClass:"modal-title"},[t._v("客户信息")]),s("div",{staticClass:"modal-con",staticStyle:{"max-height":"300px"}},[s("ul",[s("li",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t姓名： "),s("span",[t._v(t._s(t.viewData.customerName))])]),s("li",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t性别： "),s("span",[t._v(t._s(1===t.viewData.sex?"男":"女"))])]),s("li",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t职业： "),s("span",[t._v(t._s(t.viewData.deptName))])]),s("li",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t手机号： "),s("span",[t._v(t._s(t.viewData.tele))])]),s("li",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t出生日期： "),s("span",[t._v(t._s(t._f("formatDate")(t.viewData.birthday,"YYYY-MM-DD")))])]),s("li",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t婚姻状况： "),s("span",[t._v(t._s(t.viewData.deptName))])]),s("li",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t民族： "),s("span",[t._v(t._s(t.viewData.nation))])])])]),s("div",{staticClass:"modal-title"},[t._v("检查项目")]),s("div",{staticClass:"modal-con",staticStyle:{"max-height":"250px","overflow-y":"auto"}},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.viewData.items,border:""}},[s("el-table-column",{attrs:{prop:"itemName",label:"检查项目"}}),s("el-table-column",{attrs:{prop:"name",label:"项目归属"}}),s("el-table-column",{attrs:{prop:"fullPrice",label:"原价"}}),s("el-table-column",{attrs:{prop:"city",label:"折扣"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.row.exePrice/e.row.fullPrice)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t")]}}])}),s("el-table-column",{attrs:{prop:"exePrice",label:"执行价格"}}),s("el-table-column",{attrs:{prop:"checkStatus",label:"项目状态"}})],1)],1)]),s("el-dialog",{staticClass:"currentOrder",attrs:{title:"打印检验条码",visible:t.printModal,width:"800px","close-on-click-modal":!1},on:{"update:visible":function(e){t.printModal=e}}},[s("div",{staticClass:"modal-title"},[s("div",{staticClass:"right"},[s("el-select",{staticStyle:{"margin-right":"8px"},attrs:{placeholder:"打印类型"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),s("el-button",{attrs:{type:"primary"},on:{click:t.printCheck}},[t._v("打印")])],1)]),s("div",{staticClass:"modal-con",staticStyle:{width:"100%"}},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.multipleSelection,border:""}},[s("el-table-column",{attrs:{fixed:"",prop:"itemName",label:"项目"}}),s("el-table-column",{attrs:{prop:"itemCode",label:"条码号"}}),s("el-table-column",{attrs:{prop:"itemCode",label:"打印时间"}}),s("el-table-column",{attrs:{prop:"checkStatus",label:"打印状态"}})],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.printModal=!1}}},[t._v("关 闭")])],1)]),s("el-dialog",{staticClass:"discount",attrs:{title:"打折",visible:t.discountModal,"close-on-click-modal":!1,width:"800px"},on:{"update:visible":function(e){t.discountModal=e}}},[s("ul",{staticClass:"modal-con"},[s("li",{staticClass:"item"},[s("span",[t._v("合计金额：")]),s("div",{staticClass:"item-list"},[s("el-input",{staticStyle:{color:"#606266"},attrs:{disabled:""},model:{value:t.discountData.total,callback:function(e){t.$set(t.discountData,"total",e)},expression:"discountData.total"}}),t._v("元")],1)]),s("li",{staticClass:"item"},[s("span",[t._v("折扣：")]),s("div",{staticClass:"item-list iptNum"},[s("el-input-number",{attrs:{min:0,max:1,step:.1},nativeOn:{keydown:function(e){return"button"in e||13===e.keyCode?t.discountHandle(e):null}},model:{value:t.discountData.discount,callback:function(e){t.$set(t.discountData,"discount",e)},expression:"discountData.discount"}})],1)]),s("li",{staticClass:"item"},[s("span",[t._v("折扣金额：")]),s("div",{staticClass:"item-list"},[s("el-input",{attrs:{type:"number"},nativeOn:{keydown:function(e){return"button"in e||13===e.keyCode?t.difPriceHandle(e):null}},model:{value:t.discountData.difPrice,callback:function(e){t.$set(t.discountData,"difPrice",t._n(e))},expression:"discountData.difPrice"}}),t._v("元")],1)]),s("li",{staticClass:"item"},[s("span",[t._v("实收：")]),s("div",{staticClass:"item-list"},[s("el-input",{attrs:{type:"number"},nativeOn:{keydown:function(e){return"button"in e||13===e.keyCode?t.realPriceHandle(e):null}},model:{value:t.discountData.exePrice,callback:function(e){t.$set(t.discountData,"exePrice",t._n(e))},expression:"discountData.exePrice"}}),t._v("元")],1)])]),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.discountModal=!1}}},[t._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:t.confirmDiscount}},[t._v("确 定")])],1)])],1)])],1)},i=[],r=(a("7f7f"),a("e814")),o=a.n(r),l=(a("ac6a"),a("c5f6"),a("cadf"),a("551c"),a("097d"),a("c1df")),n=a.n(l),c=a("2ef0"),d=a.n(c),u={name:"DDOrder",data:function(){return{load:"",isPrint:!0,isSubmit:!1,isEdit:!0,isDisCount:!1,isDisCount2:!1,isMoreOrder:!1,visible1:!1,visible2:!1,visible3:!1,addPackageModal:!1,addProjectModal:!1,printModal:!1,orderInfoModal:!1,currentOrderModal:!1,discountModal:!1,filterPackage:"",filterDept:"",filterProject:"",orderList:[],formLabelWidth:"70px",orderVipFlag:!1,submitParams:{Operator:"001",Order:{OrderCode:"00000000-0000-0000-0000-000000000000",CustomerCode:"00000000-0000-0000-0000-000000000000",CustomerName:"",Sex:"",MaritalStatus:1,Nation:"",Birthday:"",IdcardNum:"",Photo:"",VipFlag:0,CardNum:"",Tele:"",Addr:"",Occupation:"",UnitName:"",DeptName:"",TeamName:"",PackageCode:"00000000-0000-0000-0000-000000000000",OrderVipFlag:0,OrderType:0,CreateOrderTime:n()().format("YYYY-MM-DD"),Status:"",IsLock:!1,Remark:"",OrderMoney:0,PaidStatus:0,PaidMoney:0,UnitPayMoney:0,Items:[],ReportTakeWay:0}},age:"0",rules:{CardNum:[{required:!0,message:"请输入正确位数的体检卡号",trigger:"blur"}],CustomerName:[{required:!0,message:"请输入姓名",trigger:"blur"}],Sex:[{required:!0,message:"请输入性别",trigger:"blur"}],IdcardNum:[{required:!0,message:"与身份证号码位数不符",trigger:"blur"}],Birthday:[{type:"date",required:!0,message:"请选择时间",trigger:"change"}],VipFlag:[{required:!0,message:"请选择Vip属性",trigger:"blur"}],Tele:[{required:!0,message:"请输入联系电话",trigger:"blur"}]},options:[],orderType:[],reportType:[],reportTake:[{value:0,name:"个人领取"},{value:1,name:"快递领取"},{value:2,name:"线上领取"}],GetItemList:[],GetItemListNum:0,GetDeptList:[],GetDeptListNum:0,GetPackageFilter:[],GetPackageFilterNum:0,GetPackageList:[],packageName:"",selectedLeft:[],selectedRight:[],selectedListAll:[],viewData:{},discountData:{total:0,exePrice:0,discount:0,discount2:0,difPrice:0},packageDiscount:{totalPrice:0,discount:0,discount2:0,exePrice:0},projectDiscount:{totalPrice:0,discount:0,discount2:0,exePrice:0},tableData:[],multipleSelection:[],value:"",selectedTotal:0,activeTabName:"first"}},created:function(){this.GetOrderType()},methods:{printGuide:function(){this.visible1=!1,alert("打印导检单")},printName:function(){this.visible2=!1,alert("打印姓名条码")},printCheckModal:function(){this.printModal=!0},printCheck:function(){alert("打印检验条码")},submitOrder:function(){var t=this;this.$refs.submitInfo.validate(function(e){if(e)if(0!==t.tableData.length){t.isSubmit=!0;var a=t.$loading({lock:!0,text:"提交订单中，请稍后...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});t.tableData=t.tableData.map(function(t){return t.fullPrice=Number(t.fullPrice),t.exePrice=Number(t.exePrice),t.IsUnitItem||(t.IsUnitItem=!1),t.IsGiveUp||(t.IsGiveUp=!1),t.FeeType||(t.FeeType=""),t.CheckStatus||(t.CheckStatus=0),t}),t.submitParams.Order.Items=[],t.tableData.forEach(function(e){t.submitParams.Order.Items.push(t.$handleUpperCase(e))}),t.submitParams.Order.OrderMoney=t.exePrice,t.submitParams.Order.Birthday=n()(t.submitParams.Order.Birthday).format("YYYY-MM-DD"),t.$axios.post("/api/DD/SubmitOrder",t.submitParams).then(function(e){1===e.data.status&&e.data.entity?(t.$message.success("订单创建成功"),t.clearCustomer(),t.submitParams.Order.IdcardNum=""):t.$message.error(e.data.message),t.submitParams.Order.Birthday=new Date(t.submitParams.Order.Birthday),t.isSubmit=!1,a.close()}).catch(function(e){t.submitParams.Order.Birthday=new Date(t.submitParams.Order.Birthday),t.$message.error(e.data.message),a.close(),t.isSubmit=!1})}else t.$message.error("请添加项目后提交")})},cancelOrder:function(){var t=this;this.$axios.post(this.$api.CancelSubmitOrder,{orderCode:"1"}).then(function(e){1===e.data.status?t.$message.success("订单撤销成功"):t.$message.success(e.data.message)}).catch(function(e){t.$message.success(e.data.message)})},discountBtn:function(){var t=this;0!==this.multipleSelection.length?(this.discountData.total=0,this.discountData.exePrice=0,this.multipleSelection.forEach(function(e){t.discountData.total+=e.fullPrice,t.discountData.exePrice+=Number(e.exePrice)}),this.discountData.discount=o()(this.discountData.exePrice/this.discountData.total*100)/100,this.discountData.discount2=this.discountData.exePrice/this.discountData.total,this.discountData.difPrice=Number(this.discountData.total-this.discountData.exePrice).toFixed(2),this.discountModal=!0):this.$message({type:"error",message:"请至少选择一项进行打折"})},confirmDiscount:function(){var t=this;this.isDisCount||this.discountData.exePrice/this.discountData.total==this.discountData.discount2?(this.multipleSelection.forEach(function(e){t.tableData.forEach(function(a,s){if(e.id===a.id){var i=a;i.exePrice=(a.fullPrice*t.discountData.discount2).toFixed(2),t.$set(t.tableData,s,i)}})}),this.discountModal=!1):this.$message.error("请输入折扣后按回车后再点击确定")},filtertree:function(t,e){return!t||-1!==e.label.indexOf(t)},treeClick:function(t,e){var a=this;e.checkedKeys.length>0&&this.$refs.tree.setCheckedKeys([t.id]),this.selectedLeft=this.$refs.tree.getCheckedNodes().filter(function(t){return"#"===t.id.substr(0,1)?(t.label.indexOf("普通")>-1&&(a.submitParams.Order.OrderType=0),void(t.label.indexOf("筛查")>-1&&(a.submitParams.Order.OrderType=1))):t.packageName&&t.packageCode?(a.packageName=t.packageName,void(a.submitParams.Order.PackageCode=t.packageCode)):t}),this.getDiscount("packageDiscount",this.selectedLeft)},cancelPackageBtn:function(){this.selectedLeft=[],this.packageName="",this.addPackageModal=!1,this.packageDiscount.discount=0,this.packageDiscount.discount2=0,this.packageDiscount.exePrice=0,this.$refs.tree.setCheckedKeys([])},addPackageBtn:function(){var t=this;this.visible3=!1,0!==this.$refs.tree.getCheckedNodes().length?this.isDisCount2?this.$message.error("请输入正确的折扣"):(this.tableData=this.selectedLeft.map(function(e){return e.exePrice=(e.fullPrice*t.packageDiscount.discount2).toFixed(2),e}),this.$refs.tree.setCheckedKeys([]),this.addPackageModal=!1):this.$message.error("请先选择套餐后点击确定！")},cancelBtn:function(){this.addProjectModal=!1,this.selectedRight=[],this.selectedListAll=[],this.$refs.first.setCheckedKeys([]),this.$refs.second.setCheckedKeys([]),this.$refs.third.setCheckedKeys([])},addBtn:function(){if(0!==this.$refs[this.activeTabName].getCheckedNodes().length){var t=this.$refs[this.activeTabName].getCheckedNodes().filter(function(t){return!t.children});t=this.selectedListAll.concat(t),this.selectedListAll=d.a.uniqBy(t,"id"),this.getDiscount("projectDiscount",this.selectedListAll),this.$refs[this.activeTabName].setCheckedKeys([])}else this.$message.error("请先选择后点击添加！")},getDiscount:function(t,e){var a=this;this[t].totalPrice=0,this[t].exePrice=0,e.forEach(function(e){a[t].exePrice+=e.exePrice,a[t].totalPrice+=e.fullPrice}),this[t].discount=o()(this[t].exePrice/this[t].totalPrice*100)/100,this[t].discount2=this[t].exePrice/this[t].totalPrice},removeBtn:function(){if(0!==this.$refs.treeRight.getCheckedKeys().length){var t=this.$refs.treeRight.getCheckedKeys();this.selectedListAll=this.selectedListAll.filter(function(e){return t.every(function(t){return t!==e.id})}),this.getDiscount("projectDiscount",this.selectedListAll),this.selectedRight=[]}else this.$message.error("请先选择后点击删除！")},tabsClick:function(t){this.selectedLeft=[],this.$refs.first.setCheckedKeys([]),this.$refs.second.setCheckedKeys([]),this.$refs.third.setCheckedKeys([]),"second"===t.name&&0===this.GetDeptList.length&&this.getDeptList(),"third"===t.name&&0===this.GetItemList.length&&this.getDicItemList()},removeChange:function(t,e,a){e?this.selectedRight.push(t):this.selectedRight=this.selectedRight.filter(function(e){return e.id!=t.id})},GetOrderType:function(){var t=this;this.$getType("OrderType").then(function(e){200===e.status&&1===e.data.status&&(t.orderType=e.data.entity)}),this.$axios.get(this.$api.GetOrderReportType).then(function(e){200===e.status&&1===e.data.status&&(t.reportType=e.data.entity)})},getOrderList:function(){var t=this;this.load=this.$loading({lock:!0,text:"获取订单中，请稍后...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),this.$axios.get(this.$api.GetOrderList,{params:{IdCardNum:this.submitParams.Order.IdcardNum}}).then(function(e){200===e.status&&1===e.data.status?0===e.data.entity.resultData.length?t.getCustomer("submitParams"):t.isMoreOrder?(t.orderInfoModal=!0,t.orderList=e.data.entity.resultData):(t.tableData=e.data.entity.resultData[0].items.map(function(t){return t.id=t.itemCode,t.babel=t.itemName,t}),t.setCustomer(e.data.entity.resultData[0])):(t.$message.error(e.data.message),t.load.close())}).catch(function(e){t.$message.error(e.data.message),t.load.close()})},getCustomer:function(t){var e=this;this.$axios.get(this.$api.GetCustomer,{params:{IdcardNum:this.submitParams.Order.IdcardNum}}).then(function(t){if(t.data.entity&&1===t.data.status){var a=t.data.entity;e.setCustomer(a),console.log(e.submitParams.Order)}else e.$message.error(t.data.message),e.load.close()}).catch(function(t){e.$message.error(t.data.message),e.load.close()})},getPackageList:function(){var t=this;0===this.GetPackageList.length&&this.$axios.get(this.$api.GetPackageListDD).then(function(e){200===e.status&&1===e.data.status?(t.GetPackageList=e.data.entity,t.handleTreeChildren(t.GetPackageList,0)):t.$message.error(e.data.message)}).catch(function(e){t.$message.error(e.data.message)})},getDicItemList:function(){var t=this;this.$axios.get(this.$api.GetItemList).then(function(e){200===e.status&&1===e.data.status?(t.GetItemList=e.data.entity,t.handleTreeChildren(t.GetItemList,3)):t.$message({type:"error",message:err.data.message})}).catch(function(e){t.$message({type:"error",message:e.data.message})})},getDeptList:function(){var t=this;this.$axios.get(this.$api.GetDeptListDD).then(function(e){200===e.status&&1===e.data.status?(t.GetDeptList=e.data.entity,t.handleTreeChildren(t.GetDeptList,2)):t.$message.error(e.data.message)}).catch(function(e){t.$message.error(e.data.message)})},confirmAddProjectBtn:function(){this.addProjectModal=!1;var t=this.tableData.concat(this.selectedListAll);this.tableData=d.a.uniqBy(t,"id"),this.cancelBtn()},getPackageAll:function(){var t=this;this.$axios.get(this.$api.GetPackageFilter).then(function(e){200===e.status&&1===e.data.status?(t.GetPackageFilter=e.data.entity,t.handleTreeChildren(t.GetPackageFilter,1)):t.$message.error(e.data.message)}).catch(function(e){t.$message.error(e.data.message)})},handleTreeChildren:function(t,e){var a=this;t&&t.map(function(t,s){t.id=t.packageCode||t.itemCode||t.deptCode||"#"+s,t.label=t.packageName||t.itemName||t.deptName||t.name,t.type=e,1===e?a.GetPackageFilterNum++:2===e?a.GetDeptListNum++:3===e&&a.GetItemListNum++,t.items&&t.items.length>0&&(t.children=t.items,a.handleTreeChildren(t.children,e))})},allTreeSelection:function(t,e,a){var s=this.$refs[e].getCheckedNodes().length;s===a?this.$refs[e].setCheckedKeys([]):this.$refs[e].setCheckedNodes(this[t])},toogleTreeSelection:function(t,e){var a=this,s=this[t].filter(function(t){return a.$refs[e].getCheckedNodes().every(function(e){return e.id!=t.id})});this.$refs[e].setCheckedKeys([]),this.$refs[e].setCheckedNodes(s)},viewOrder:function(t){this.viewData=t,this.currentOrderModal=!0},cardnumKeyup:function(t){if(13==t.keyCode){var e=this;this.$axios.get(this.$api.GetCustomerURL,{params:{CardNum:this.submitParams.Order.CardNum}}).then(function(t){1===t.data.status?e.setCustomer(t.data.entity):(e.$message.error(t.data.message),e.submitParams.Order.CardNum="")}).catch(function(t){console.log(t)})}},clearCustomer:function(){this.tableData=[],this.isEdit=!0,this.submitParams.Order.OrderCode="00000000-0000-0000-0000-000000000000",this.submitParams.Order.CustomerCode="00000000-0000-0000-0000-000000000000",this.submitParams.Order.PackageCode="00000000-0000-0000-0000-000000000000",this.submitParams.Order.CustomerName="",this.submitParams.Order.Sex="",this.submitParams.Order.MaritalStatus=1,this.submitParams.Order.Nation="",this.submitParams.Order.Birthday="",this.submitParams.Order.Photo="",this.submitParams.Order.VipFlag=0,this.submitParams.Order.CardNum="",this.submitParams.Order.Tele="",this.submitParams.Order.Addr="",this.submitParams.Order.Occupation="",this.submitParams.Order.UnitName="",this.submitParams.Order.DeptName="",this.submitParams.Order.TeamName="",this.submitParams.Order.OrderVipFlag=0,this.submitParams.Order.OrderType=0,this.submitParams.Order.CreateOrderTime=n()().format("YYYY-MM-DD"),this.submitParams.Order.Status="",this.submitParams.Order.IsLock=!1,this.submitParams.Order.IsReped=!1,this.submitParams.Order.IsUnitOrder=!1,this.submitParams.Order.Remark="",this.submitParams.Order.OrderMoney=0,this.submitParams.Order.PaidMoney=0,this.submitParams.Order.UnitPayMoney=0,this.submitParams.Order.Items=[],this.submitParams.Order.ReportTakeWay=0},setCustomer:function(t){var e="submitParams";this[e].Order.CustomerName=t.customerName,this[e].Order.CustomerCode=t.customerCode,this[e].Order.IdcardNum=t.idcardNum,this[e].Order.CardNum=t.cardNum,this[e].Order.Sex=t.sex,t.photo&&(this[e].Order.Photo=t.photo),t.createOrderTime&&(this[e].Order.CreateOrderTime=n()(t.createOrderTime).format("YYYY-MM-DD")),this[e].Order.Nation=t.nation,this[e].Order.Birthday=new Date(t.birthday),t.maritalStatus&&(this[e].Order.MaritalStatus=t.maritalStatus),t.orderType&&(this[e].Order.OrderType=t.orderType),t.packageCode&&"00000000-0000-0000-0000-000000000000"!==t.packageCode&&(this[e].Order.PackageCode=t.packageCode),this[e].Order.VipFlag=t.vipFlag,this[e].Order.Occupation=t.occupation,this[e].Order.UnitName=t.unitName,this[e].Order.DeptName=t.deptName,this[e].Order.TeamName=t.teamName,this[e].Order.Tele=t.tele,this[e].Order.Addr=t.addr,this[e].Order.Remark=t.remark,this[e].Order.ReportTakeWay=t.reportTakeWay,this[e].Order.IsLock=t.isLock,this[e].Order.OrderMoney=t.orderMoney,this[e].Order.PaidMoney=t.paidMoney,this[e].Order.UnitPayMoney=t.unitPayMoney,t.orderCode&&"00000000-0000-0000-0000-000000000000"!==t.orderCode&&(this[e].Order.OrderCode=t.orderCode),t.isLock&&this.$alert("该订单已经提交，可能会出现修改失败","提醒：",{confirmButtonText:"关闭",type:"warning"}),this.load.close()},setIdentity:function(t){var e=JSON.parse(t);this.submitParams.Order.CustomerName=e.Name,this.submitParams.Order.Sex=e.Sex,this.submitParams.Order.Birthday=new Date(e.birthday),this.submitParams.Order.Nation=e.Nation,this.submitParams.Order.IdcardNum=e.IdcardNumNum,this.submitParams.Order.PhotoBase64Code=e.PicBase64Code},getIdentity:function(){api.getIdcard(this.setIdentity)},setPhoto:function(t){this.submitParams.Order.PhotoBase64Code=t},getShot:function(){api.shot(this.setPhoto)},changeIsGoto:function(t){this.$store.commit("changeGoto",t)},handleSelectionChange:function(t){this.multipleSelection=t},delModal:function(){var t=this;0!==this.multipleSelection.length?this.$confirm('<span>确定对当前所选项目进行删除操作吗？</span><br /><i style="color:#8F9399;">删除后不可恢复，请谨慎操作</i>',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",dangerouslyUseHTMLString:!0,type:"warning"}).then(function(){t.tableData=t.tableData.filter(function(e){return t.multipleSelection.every(function(t){return t.itemCode!==e.itemCode})}),t.$message({type:"success",message:"删除成功!"})}).catch(function(){t.$message({type:"info",message:"已取消删除"})}):this.$message({type:"error",message:"请至少选择一项进行删除"})},getSelectedRightTotal:function(t,e,a){var s=0;e&&++s,this.selectedRightTotal=s},discountHandle:function(){this.discountData.discount>=.1||this.discountData.discount<=1?(this.isDisCount=!0,this.discountData.exePrice=Number(this.discountData.total*this.discountData.discount).toFixed(2),this.discountData.difPrice=Number(this.discountData.total-this.discountData.exePrice).toFixed(2),this.discountData.discount2=this.discountData.discount):this.$message.error("请输入正确的折扣")},difPriceHandle:function(){this.discountData.difPrice<this.discountData.total?(this.isDisCount=!0,this.discountData.difPrice=Number(this.discountData.difPrice),this.discountData.exePrice=Number(this.discountData.total-this.discountData.difPrice).toFixed(2),this.discountData.discount=o()(this.discountData.exePrice/this.discountData.total*100)/100,this.discountData.discount2=this.discountData.exePrice/this.discountData.total):this.$message.error("请输入正确的折扣")},realPriceHandle:function(){this.discountData.exePrice<this.discountData.total?(this.isDisCount=!0,this.discountData.exePrice=Number(this.discountData.exePrice),this.discountData.discount=o()(this.discountData.exePrice/this.discountData.total*100)/100,this.discountData.discount2=this.discountData.exePrice/this.discountData.total,this.discountData.difPrice=Number(this.discountData.total-this.discountData.exePrice).toFixed(2)):this.$message.error("请输入正确的折扣")},packageDiscountHandle:function(){if(this.packageDiscount.discount<.1||this.packageDiscount.discount>1)return this.$message.error("请输入正确的折扣"),void(this.isDisCount2=!1);this.packageDiscount.exePrice=o()(this.packageDiscount.totalPrice*this.packageDiscount.discount).toFixed(2)},packageExePriceHandle:function(){if(this.packageDiscount.exePrice>this.packageDiscount.totalPrice)return this.isDisCount2=!1,void this.$message.error("实收价应不高于总价格！");this.packageDiscount.discount=o()(this.packageDiscount.exePrice/this.packageDiscount.totalPrice*100)/100,this.packageDiscount.discount2=this.packageDiscount.exePrice/this.packageDiscount.totalPrice},projectDiscountHandle:function(){if(this.projectDiscount.discount<.1||this.projectDiscount.discount>1)return this.$message.error("请输入正确的折扣"),void(this.isDisCount2=!1);this.projectDiscount.exePrice=o()(this.projectDiscount.totalPrice*this.projectDiscount.discount).toFixed(2)},projectExePriceHandle:function(){if(this.projectDiscount.exePrice>this.projectDiscount.totalPrice)return this.isDisCount2=!1,void this.$message.error("实收价应不高于总价格！");this.projectDiscount.discount=o()(this.projectDiscount.exePrice/this.projectDiscount.totalPrice*100)/100,this.projectDiscount.discount2=this.projectDiscount.exePrice/this.projectDiscount.totalPrice}},computed:{totalPrice:function(){var t=0;return this.tableData.forEach(function(e){t+=e.fullPrice}),t},exePrice:function(){var t=0;return this.tableData.forEach(function(e){t+=Number(e.exePrice)}),t},totalNum:function(){return this.tableData.length},selectedRightTotal:function(){return this.$refs.treeRight?this.$refs.treeRight.getCheckedNodes().length:0},selectedThirdTotal:function(){return this.$refs.third?this.$refs.third.getCheckedNodes().length:0},selectedSecondTotal:function(){return this.$refs.second?this.$refs.second.getCheckedNodes().length:0},selectedFirstTotal:function(){return this.$refs.first?this.$refs.first.getCheckedNodes().length:0}},watch:{"submitParams.Order.IdcardNum":function(t,e){t!==e&&18===t.length?(this.clearCustomer(),this.isEdit=!1,this.getOrderList()):this.clearCustomer()},"submitParams.Order.VipFlag":function(t,e){t!==e&&(this.orderVipFlag=1===t)},orderVipFlag:function(t,e){t!==e&&(this.submitParams.Order.OrderVipFlag=t?1:0)},"submitParams.Order.Birthday":function(t,e){t!==e&&(this.age=t?n()().year()-n()(t).year():0)},"peopleInfo.IdcardNum":function(t,e){t!==e&&18===t.length&&this.getCustomer("peopleInfo")},filterPackage:function(t){this.$refs.first.filter(t)},filterDept:function(t){this.$refs.second.filter(t)},filterProject:function(t){this.$refs.third.filter(t)},multipleSelection:function(t,e){t!=e&&(this.selectedTotal=t.length)}}},m=u,p=(a("5232"),a("2877")),h=Object(p["a"])(m,s,i,!1,null,null,null);h.options.__file="DDOrder.vue";e["default"]=h.exports},"437e":function(t,e,a){},5232:function(t,e,a){"use strict";var s=a("437e"),i=a.n(s);i.a},dc3a:function(t,e){t.exports="data:image/jpeg;base64,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"}}]);